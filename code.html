<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

	<title>Code Page</title>
	<script src="//js.live.net/v5.0/wl.js"></script>

</head>
<body>
<h1>Hello</h1>
<button id= "sign in" onclick="signin()">Sign In</button>
<div id ="signin"></div>
<script type="text/javascript">
document.write("<p>A</p>");

       function log(msg) {
    setTimeout(function() {
        throw new Error(msg);
    }, 0);}
log("b");
var APP_CLIENT_ID = "0000000044100F5A"
var REDIRECT_URL = "https://login.live.com/oauth20_desktop.srf"
var scope = ['wl.signin', 'wl.basic', 'wl.offline_access','wl.signin', 'wl.basic']
WL.init({ client_id: APP_CLIENT_ID, redirect_uri: REDIRECT_URL, scope: scope, response_type: "code" }); 
WL.Event.subscribe("auth.login", onLogin);
WL.Event.subscribe("auth.sessionChange", onSessionChange);

function onLogin() {
    document.getElementById("infoLabel").innerText = "Signed in.";
}
function onSessionChange() {
    var session = WL.getSession();
    if (session) {
    document.getElementById("infoLabel").innerText =
        "Something about the session changed.";
    }
    else {
        document.getElementById("infoLabel").innerText =
            "Signed out or session error.";
    }
}
var session = WL.getSession();
if (session) {
    log("You are already signed in!");
} else {
 log("a");
    WL.login({ scope: "wl.signini+wl.skydrive+wil.skydrive_update+wil.offline_access" });
}
function signin(){
session = WL.getSession();
WL.login({scope:"wl.signini+wl.skydrive+wil.skydrive_update+wil.offline_access"});
}
WL.ui({
    name: "signin",
    element: "signin"
});

 
function onSessionChange() {
    var session = WL.getSession();
    if (session) {
        log("Your session has changed.");
    }
}

</script>



</body>
</html>
